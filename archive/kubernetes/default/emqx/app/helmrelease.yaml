---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: &app emqx-operator
  namespace: default
spec:
  interval: 60m
  chart:
    spec:
      chart: *app
      version: 2.1.4
      sourceRef:
        kind: HelmRepository
        name: emqx
        namespace: flux-system
      interval: 60m
  # Values link: https://github.com/emqx/emqx-operator/blob/main/deploy/charts/emqx-operator/values.yaml
  values:
    skipCRDs: false
    replicaCount: 1
    cert-manager:
      # Using [cert manager](https://github.com/jetstack/cert-manager) for provisioning the certificates for the webhook server.
      # You can follow [the cert manager documentation](https://cert-manager.io/docs/installation/) to install it.
      # Or you can use your own certificate, You need create a TLS secret for provisioning the certificates for the "${FULLNAME}-webhook-service.${NAMESPACE}.svc"
      enable: true
      # If not set, a name is generated using the "${FULLNAME}-webhook-server-cert"
      #secretName: ""

    resources:
      limits:
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 30Mi
  